{
  "_format": "hh3-artifact-1",
  "contractName": "CommitteeSortition",
  "sourceName": "contracts/sortition/CommitteeSortition.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_bondingRegistry",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_ciphernodeRegistry",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_submissionWindow",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "CommitteeAlreadyFinalized",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "CommitteeNotInitialized",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidTicketNumber",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NodeAlreadySubmitted",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NodeNotEligible",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "OnlyCiphernodeRegistry",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SubmissionWindowClosed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SubmissionWindowNotClosed",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address[]",
          "name": "committee",
          "type": "address[]"
        }
      ],
      "name": "CommitteeFinalized",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "node",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "ticketNumber",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "score",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "addedToCommittee",
          "type": "bool"
        }
      ],
      "name": "TicketSubmitted",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "bondingRegistry",
      "outputs": [
        {
          "internalType": "contract IBondingRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "ciphernodeRegistry",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "node",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "ticketNumber",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "seed",
          "type": "uint256"
        }
      ],
      "name": "computeTicketScore",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        }
      ],
      "name": "finalizeCommittee",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "committee",
          "type": "address[]"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        }
      ],
      "name": "getSortitionInfo",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "threshold",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "seed",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "requestBlock",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "submissionDeadline",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "finalized",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "node",
          "type": "address"
        }
      ],
      "name": "getSubmission",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "node",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "ticketNumber",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "score",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "exists",
              "type": "bool"
            }
          ],
          "internalType": "struct CommitteeSortition.TicketSubmission",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        }
      ],
      "name": "getTopNodes",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "threshold",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "seed",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "requestBlock",
          "type": "uint256"
        }
      ],
      "name": "initializeSortition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "sortitions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "threshold",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "seed",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "requestBlock",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "submissionDeadline",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "finalized",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "submissionWindow",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "e3Id",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "ticketNumber",
          "type": "uint256"
        }
      ],
      "name": "submitTicket",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60e060405234801561000f575f5ffd5b50604051610ea3380380610ea383398101604081905261002e91610064565b6001600160a01b03928316608052911660a05260c05261009d565b80516001600160a01b038116811461005f575f5ffd5b919050565b5f5f5f60608486031215610076575f5ffd5b61007f84610049565b925061008d60208501610049565b9150604084015190509250925092565b60805160a05160c051610dc06100e35f395f81816102b1015261043401525f81816101d201526103b301525f81816101930152818161083501526108a30152610dc05ff3fe608060405234801561000f575f5ffd5b50600436106100c4575f3560e01c8063b64f05921161007d578063e621dbc711610058578063e621dbc7146102ac578063e6745e13146102d3578063e7a5c098146102e6575f5ffd5b8063b64f059214610209578063da881e5a14610279578063e243eaf014610299575f5ffd5b806385814243116100ad578063858142431461018e5780638dcdd86b146101cd5780638e28a380146101f4575f5ffd5b806355f0e221146100c85780636c58e4eb14610122575b5f5ffd5b6100db6100d6366004610bf5565b610325565b604051610119919081516001600160a01b03168152602080830151908201526040808301519082015260609182015115159181019190915260800190565b60405180910390f35b610164610130366004610c1f565b5f9081526020819052604090208054600182015460028301546003840154600490940154929491939092909160ff90911690565b6040805195865260208601949094529284019190915260608301521515608082015260a001610119565b6101b57f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610119565b6101b57f000000000000000000000000000000000000000000000000000000000000000081565b610207610202366004610c36565b6103a8565b005b61026b610217366004610c65565b6040805160609590951b6bffffffffffffffffffffffff1916602080870191909152603486019490945260548501929092526074808501919091528151808503909101815260949093019052815191012090565b604051908152602001610119565b61028c610287366004610c1f565b61046f565b6040516101199190610c9b565b61028c6102a7366004610c1f565b610590565b61026b7f000000000000000000000000000000000000000000000000000000000000000081565b6102076102e1366004610ce6565b6105fa565b6101646102f4366004610c1f565b5f60208190529081526040902080546001820154600283015460038401546004909401549293919290919060ff1685565b604080516080810182525f808252602082018190529181018290526060810191909152505f828152602081815260408083206001600160a01b03808616855260069091018352928190208151608081018352815490941684526001810154928401929092526002820154908301526003015460ff16151560608201525b92915050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146103f15760405163b56831db60e01b815260040160405180910390fd5b5f84815260208190526040902080541561041e57604051631860f69960e31b815260040160405180910390fd5b83815560018101839055600281018290556104597f000000000000000000000000000000000000000000000000000000000000000042610d1a565b6003820155600401805460ff1916905550505050565b5f81815260208190526040902080546060919061049f5760405163ad0d953f60e01b815260040160405180910390fd5b600481015460ff16156104c557604051631860f69960e31b815260040160405180910390fd5b806003015442116104e957604051632f021e8d60e11b815260040160405180910390fd5b60048101805460ff191660011790556005810180546040805160208084028201810190925282815292919083018282801561054b57602002820191905f5260205f20905b81546001600160a01b0316815260019091019060200180831161052d575b50505050509150827fed38c6266ebed7c01d311349a7fa67e0ef0f1d2f4760d60dbb34ca4799a2e132836040516105829190610c9b565b60405180910390a250919050565b5f81815260208181526040918290206005018054835181840281018401909452808452606093928301828280156105ee57602002820191905f5260205f20905b81546001600160a01b031681526001909101906020018083116105d0575b50505050509050919050565b5f82815260208190526040902080546106265760405163ad0d953f60e01b815260040160405180910390fd5b806003015442111561064b576040516332999ab560e11b815260040160405180910390fd5b600481015460ff161561067157604051631860f69960e31b815260040160405180910390fd5b335f90815260068201602052604090206003015460ff16156106a65760405163257309f160e11b815260040160405180910390fd5b6106b13383856107d9565b600181810154604080516bffffffffffffffffffffffff1933606081901b91909116602080840191909152603483018890526054830189905260748084019590955283518084039095018552609483018085528551958201959095206101148401855282865260b4840189815260d4850182815260f49095018881525f85815260068b01909452958320965187546001600160a01b0319166001600160a01b0390911617875551968601969096559151600285015591516003909301805460ff1916931515939093179092556107899084908461099a565b6040805186815260208101859052821515818301529051919250339187917f2669da55d0606fd95b54298fc8fa777246cc83b04141d983fa5a6553c09bf071919081900360600190a35050505050565b815f036107f95760405163aeaddff160e01b815260040160405180910390fd5b5f818152602081905260408082206002810154915163bb03bd7160e01b81526001600160a01b03878116600483015260248201939093529092917f0000000000000000000000000000000000000000000000000000000000000000169063bb03bd7190604401602060405180830381865afa15801561087a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061089e9190610d2d565b90505f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316631209b1f66040518163ffffffff1660e01b8152600401602060405180830381865afa1580156108fd573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109219190610d2d565b9050805f036109435760405163aeaddff160e01b815260040160405180910390fd5b5f61094e8284610d44565b9050808611156109715760405163aeaddff160e01b815260040160405180910390fd5b805f036109915760405163149fbcfd60e11b815260040160405180910390fd5b50505050505050565b82546005840180545f9211156109bf576109b5858585610a6b565b6001915050610a64565b5f856006015f83600185805490506109d79190610d63565b815481106109e7576109e7610d76565b5f9182526020808320909101546001600160a01b03168352820192909252604001902060020154905080841015610a5e5781805480610a2857610a28610d8a565b5f8281526020902081015f1990810180546001600160a01b0319169055019055610a53868686610a6b565b600192505050610a64565b5f925050505b9392505050565b6005830180545f5b8254811015610ad7575f866006015f858481548110610a9457610a94610d76565b5f9182526020808320909101546001600160a01b03168352820192909252604001902060020154905080851015610ace5781925050610ad7565b50600101610a73565b508154600181810184555f8481526020812090920180546001600160a01b03191690558354610b069190610d63565b90505b81811115610b945782610b1d600183610d63565b81548110610b2d57610b2d610d76565b905f5260205f20015f9054906101000a90046001600160a01b0316838281548110610b5a57610b5a610d76565b5f91825260209091200180546001600160a01b0319166001600160a01b039290921691909117905580610b8c81610d9e565b915050610b09565b5083828281548110610ba857610ba8610d76565b905f5260205f20015f6101000a8154816001600160a01b0302191690836001600160a01b031602179055505050505050565b80356001600160a01b0381168114610bf0575f5ffd5b919050565b5f5f60408385031215610c06575f5ffd5b82359150610c1660208401610bda565b90509250929050565b5f60208284031215610c2f575f5ffd5b5035919050565b5f5f5f5f60808587031215610c49575f5ffd5b5050823594602084013594506040840135936060013592509050565b5f5f5f5f60808587031215610c78575f5ffd5b610c8185610bda565b966020860135965060408601359560600135945092505050565b602080825282518282018190525f918401906040840190835b81811015610cdb5783516001600160a01b0316835260209384019390920191600101610cb4565b509095945050505050565b5f5f60408385031215610cf7575f5ffd5b50508035926020909101359150565b634e487b7160e01b5f52601160045260245ffd5b808201808211156103a2576103a2610d06565b5f60208284031215610d3d575f5ffd5b5051919050565b5f82610d5e57634e487b7160e01b5f52601260045260245ffd5b500490565b818103818111156103a2576103a2610d06565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52603160045260245ffd5b5f81610dac57610dac610d06565b505f19019056fea164736f6c634300081c000a",
  "deployedBytecode": "0x608060405234801561000f575f5ffd5b50600436106100c4575f3560e01c8063b64f05921161007d578063e621dbc711610058578063e621dbc7146102ac578063e6745e13146102d3578063e7a5c098146102e6575f5ffd5b8063b64f059214610209578063da881e5a14610279578063e243eaf014610299575f5ffd5b806385814243116100ad578063858142431461018e5780638dcdd86b146101cd5780638e28a380146101f4575f5ffd5b806355f0e221146100c85780636c58e4eb14610122575b5f5ffd5b6100db6100d6366004610bf5565b610325565b604051610119919081516001600160a01b03168152602080830151908201526040808301519082015260609182015115159181019190915260800190565b60405180910390f35b610164610130366004610c1f565b5f9081526020819052604090208054600182015460028301546003840154600490940154929491939092909160ff90911690565b6040805195865260208601949094529284019190915260608301521515608082015260a001610119565b6101b57f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610119565b6101b57f000000000000000000000000000000000000000000000000000000000000000081565b610207610202366004610c36565b6103a8565b005b61026b610217366004610c65565b6040805160609590951b6bffffffffffffffffffffffff1916602080870191909152603486019490945260548501929092526074808501919091528151808503909101815260949093019052815191012090565b604051908152602001610119565b61028c610287366004610c1f565b61046f565b6040516101199190610c9b565b61028c6102a7366004610c1f565b610590565b61026b7f000000000000000000000000000000000000000000000000000000000000000081565b6102076102e1366004610ce6565b6105fa565b6101646102f4366004610c1f565b5f60208190529081526040902080546001820154600283015460038401546004909401549293919290919060ff1685565b604080516080810182525f808252602082018190529181018290526060810191909152505f828152602081815260408083206001600160a01b03808616855260069091018352928190208151608081018352815490941684526001810154928401929092526002820154908301526003015460ff16151560608201525b92915050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146103f15760405163b56831db60e01b815260040160405180910390fd5b5f84815260208190526040902080541561041e57604051631860f69960e31b815260040160405180910390fd5b83815560018101839055600281018290556104597f000000000000000000000000000000000000000000000000000000000000000042610d1a565b6003820155600401805460ff1916905550505050565b5f81815260208190526040902080546060919061049f5760405163ad0d953f60e01b815260040160405180910390fd5b600481015460ff16156104c557604051631860f69960e31b815260040160405180910390fd5b806003015442116104e957604051632f021e8d60e11b815260040160405180910390fd5b60048101805460ff191660011790556005810180546040805160208084028201810190925282815292919083018282801561054b57602002820191905f5260205f20905b81546001600160a01b0316815260019091019060200180831161052d575b50505050509150827fed38c6266ebed7c01d311349a7fa67e0ef0f1d2f4760d60dbb34ca4799a2e132836040516105829190610c9b565b60405180910390a250919050565b5f81815260208181526040918290206005018054835181840281018401909452808452606093928301828280156105ee57602002820191905f5260205f20905b81546001600160a01b031681526001909101906020018083116105d0575b50505050509050919050565b5f82815260208190526040902080546106265760405163ad0d953f60e01b815260040160405180910390fd5b806003015442111561064b576040516332999ab560e11b815260040160405180910390fd5b600481015460ff161561067157604051631860f69960e31b815260040160405180910390fd5b335f90815260068201602052604090206003015460ff16156106a65760405163257309f160e11b815260040160405180910390fd5b6106b13383856107d9565b600181810154604080516bffffffffffffffffffffffff1933606081901b91909116602080840191909152603483018890526054830189905260748084019590955283518084039095018552609483018085528551958201959095206101148401855282865260b4840189815260d4850182815260f49095018881525f85815260068b01909452958320965187546001600160a01b0319166001600160a01b0390911617875551968601969096559151600285015591516003909301805460ff1916931515939093179092556107899084908461099a565b6040805186815260208101859052821515818301529051919250339187917f2669da55d0606fd95b54298fc8fa777246cc83b04141d983fa5a6553c09bf071919081900360600190a35050505050565b815f036107f95760405163aeaddff160e01b815260040160405180910390fd5b5f818152602081905260408082206002810154915163bb03bd7160e01b81526001600160a01b03878116600483015260248201939093529092917f0000000000000000000000000000000000000000000000000000000000000000169063bb03bd7190604401602060405180830381865afa15801561087a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061089e9190610d2d565b90505f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316631209b1f66040518163ffffffff1660e01b8152600401602060405180830381865afa1580156108fd573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109219190610d2d565b9050805f036109435760405163aeaddff160e01b815260040160405180910390fd5b5f61094e8284610d44565b9050808611156109715760405163aeaddff160e01b815260040160405180910390fd5b805f036109915760405163149fbcfd60e11b815260040160405180910390fd5b50505050505050565b82546005840180545f9211156109bf576109b5858585610a6b565b6001915050610a64565b5f856006015f83600185805490506109d79190610d63565b815481106109e7576109e7610d76565b5f9182526020808320909101546001600160a01b03168352820192909252604001902060020154905080841015610a5e5781805480610a2857610a28610d8a565b5f8281526020902081015f1990810180546001600160a01b0319169055019055610a53868686610a6b565b600192505050610a64565b5f925050505b9392505050565b6005830180545f5b8254811015610ad7575f866006015f858481548110610a9457610a94610d76565b5f9182526020808320909101546001600160a01b03168352820192909252604001902060020154905080851015610ace5781925050610ad7565b50600101610a73565b508154600181810184555f8481526020812090920180546001600160a01b03191690558354610b069190610d63565b90505b81811115610b945782610b1d600183610d63565b81548110610b2d57610b2d610d76565b905f5260205f20015f9054906101000a90046001600160a01b0316838281548110610b5a57610b5a610d76565b5f91825260209091200180546001600160a01b0319166001600160a01b039290921691909117905580610b8c81610d9e565b915050610b09565b5083828281548110610ba857610ba8610d76565b905f5260205f20015f6101000a8154816001600160a01b0302191690836001600160a01b031602179055505050505050565b80356001600160a01b0381168114610bf0575f5ffd5b919050565b5f5f60408385031215610c06575f5ffd5b82359150610c1660208401610bda565b90509250929050565b5f60208284031215610c2f575f5ffd5b5035919050565b5f5f5f5f60808587031215610c49575f5ffd5b5050823594602084013594506040840135936060013592509050565b5f5f5f5f60808587031215610c78575f5ffd5b610c8185610bda565b966020860135965060408601359560600135945092505050565b602080825282518282018190525f918401906040840190835b81811015610cdb5783516001600160a01b0316835260209384019390920191600101610cb4565b509095945050505050565b5f5f60408385031215610cf7575f5ffd5b50508035926020909101359150565b634e487b7160e01b5f52601160045260245ffd5b808201808211156103a2576103a2610d06565b5f60208284031215610d3d575f5ffd5b5051919050565b5f82610d5e57634e487b7160e01b5f52601260045260245ffd5b500490565b818103818111156103a2576103a2610d06565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52603160045260245ffd5b5f81610dac57610dac610d06565b505f19019056fea164736f6c634300081c000a",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "immutableReferences": {
    "19668": [
      {
        "length": 32,
        "start": 403
      },
      {
        "length": 32,
        "start": 2101
      },
      {
        "length": 32,
        "start": 2211
      }
    ],
    "19671": [
      {
        "length": 32,
        "start": 466
      },
      {
        "length": 32,
        "start": 947
      }
    ],
    "19674": [
      {
        "length": 32,
        "start": 689
      },
      {
        "length": 32,
        "start": 1076
      }
    ]
  },
  "inputSourceName": "project/contracts/sortition/CommitteeSortition.sol",
  "buildInfoId": "solc-0_8_28-3e03817383dac2d80aaffcb248a668140348a693"
}