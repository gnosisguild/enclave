networks:
  fixed_network:
    ipam:
      config:
        - subnet: 172.20.0.0/16

services:
  rendezvous:
    networks:
      fixed_network:
        ipv4_address: 172.20.0.2
    build: 
      context: ../..
      dockerfile: p2p/tests/Dockerfile
    environment:
      RUST_LOG: info
    command: rendezvous

  register:
    networks:
      fixed_network:
        ipv4_address: 172.20.0.3
    build: 
      context: ../..
      dockerfile: p2p/tests/Dockerfile
    environment:
      RUST_LOG: info
    command: register

  discover:
    networks:
      fixed_network:
        ipv4_address: 172.20.0.4
    build: 
      context: ../..
      dockerfile: p2p/tests/Dockerfile
    environment:
      RUST_LOG: info
    command: discover
