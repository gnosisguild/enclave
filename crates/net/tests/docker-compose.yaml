services:
  alice:
    image: p2p_test:latest
    command: ["/app/p2p_test", "alice"]
    environment:
      QUIC_PORT: 9091
      DIAL_TO: "/dns4/charlie/udp/9091/quic-v1"
      TEST_CONFIG: "dht_lead"
    networks:
      - p2p_test_net

  bob:
    image: p2p_test:latest 
    command: ["/app/p2p_test", "bob"]
    environment:
      QUIC_PORT: 9091
      DIAL_TO: "/dns4/charlie/udp/9091/quic-v1"
    networks:
      - p2p_test_net

  charlie:
    image: p2p_test:latest 
    command: ["/app/p2p_test", "charlie"]
    environment:
      QUIC_PORT: 9091
    networks:
      - p2p_test_net

networks:
  p2p_test_net:
    driver: bridge
